{% load static %}
<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <title>Үй бухгалтериясы</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; }

        .card { margin-bottom: 1rem; }

        /* 390px және төмен үшін */
        @media (max-width: 390px) {
            h1 { font-size: 1.4rem; text-align: center; }
            table { font-size: 0.75rem; }
            button { font-size: 0.9rem; padding: 0.5rem 0.7rem; }
            .table-responsive { overflow-x: auto; }
        }
    </style>
</head>
<body>
<div class="container py-4">
    <h1 class="mb-4 text-center">Үй бухгалтериясы</h1>

    <div class="row mb-4">
        <div class="col-12 col-md-4">
            <div class="card text-white bg-success shadow-sm">
                <div class="card-header">Жалпы кіріс</div>
                <div class="card-body">
                    <h5 class="card-title">{{ total_income }} ₸</h5>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-4">
            <div class="card text-white bg-danger shadow-sm">
                <div class="card-header">Жалпы шығыс</div>
                <div class="card-body">
                    <h5 class="card-title">{{ total_expense }} ₸</h5>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-4">
            <div class="card text-white bg-primary shadow-sm">
                <div class="card-header">Баланс</div>
                <div class="card-body">
                    <h5 class="card-title">{{ balance }} ₸</h5>
                </div>
            </div>
        </div>
    </div>

    <div class="text-end mb-3">
        <a href="{% url 'add_transaction' %}" class="btn btn-success btn-lg w-100 w-md-auto">Жаңа жазба қосу</a>
    </div>

    <h2>Транзакциялар</h2>
    <div class="table-responsive">
        <table class="table table-striped table-bordered mt-2">
            <thead class="table-dark">
                <tr>
                    <th>Күні</th>
                    <th>Сипаттама</th>
                    <th>Сома</th>
                    <th>Түрі</th>
                    <th>Әрекет</th>
                </tr>
            </thead>
            <tbody>
                {% for t in transactions %}
                <tr>
                    <td>{{ t.date }}</td>
                    <td>{{ t.title }}</td>
                    <td>{{ t.amount }} ₸</td>
                    <td>{{ t.transaction_type }}</td>
                    <td>
                        <a href="{% url 'delete_transaction' t.pk %}" class="btn btn-danger btn-sm w-100">Жою</a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="text-center">Транзакциялар жоқ</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
</body>
</html>
